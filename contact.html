<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact | Baker Tech Solutions</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />

  <!-- Small page-only helpers (doesn't require editing your global CSS) -->
  <style>
    /* Honeypot should be invisible to humans but visible to bots */
    .honeypot {
      position: absolute !important;
      left: -9999px !important;
      width: 1px !important;
      height: 1px !important;
      overflow: hidden !important;
    }
    .sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0,0,0,0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }
    .alert {
      border-radius: 14px;
      padding: 12px 14px;
      margin-top: 12px;
      line-height: 1.35;
      font-size: 0.95rem;
    }
    .alert.success { border: 1px solid rgba(16, 185, 129, 0.35); }
    .alert.error   { border: 1px solid rgba(239, 68, 68, 0.35); }
    .alert.info    { border: 1px solid rgba(59, 130, 246, 0.35); }
    .tiny {
      font-size: 0.85rem;
    }
    .field[aria-invalid="true"] {
      outline: 2px solid rgba(239, 68, 68, 0.55);
      outline-offset: 1px;
    }
  </style>
</head>

<body id="top">
  <div class="bg-grid" aria-hidden="true"></div>

  <header class="glass-nav">
    <div class="container nav-wrap">
      <a class="brand" href="index.html" aria-label="Baker Tech Solutions home">
        <span class="brand-mark" aria-hidden="true">◆</span>
        <span class="brand-text">Baker Tech Solutions</span>
      </a>

      <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="site-nav">
        <span></span><span></span><span></span>
      </button>

      <nav id="site-nav" class="nav-links" data-nav>
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="pricing.html">Pricing</a>
        <a href="community.html">Community</a>
        <a href="contact.html" class="nav-btn" aria-current="page">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-copy">
          <p class="eyebrow">Contact</p>
          <h1>Let’s talk.</h1>
          <p class="subhead">
            Tell us what you’re trying to accomplish and we’ll respond with a clear plan and estimate.
            The more details you provide, the faster we can help.
          </p>

          <div class="hero-actions">
            <a class="btn primary" href="#form">Start a request</a>
            <a class="btn ghost" href="pricing.html">View Pricing</a>
          </div>
          
      </div>
    </section>

    <!-- FORM -->
    <section class="section alt" id="form">
      <div class="container">
        <div class="section-head">
          <h2>Contact form</h2>

          <div class="alert info tiny" role="note" aria-label="Privacy note">
            <strong>Privacy tip:</strong> Don’t include passwords, recovery codes, or full card numbers.
            If we need sensitive info, we’ll request it securely.
          </div>
        </div>

        <div class="split">
          <!-- LEFT: FORM -->
          <article class="card">
            <h3>Send a request</h3>
            <p class="muted form-help">Fill this out and we’ll get back to you.</p>

            <form
              id="contactForm"
              class="form"
              action="https://formspree.io/f/mzdaeybj"
              method="POST"
              novalidate
            >
              <!-- spam protection -->
              <input type="text" name="website" class="honeypot" tabindex="-1" autocomplete="off" aria-hidden="true">

              <!-- helpful metadata -->
              <input type="hidden" name="source" value="contact-page">
              <input type="hidden" name="page" value="/contact.html">
              <input type="hidden" name="submittedAt" id="submittedAt" value="">

              <div class="form-grid">
                <div class="form-field">
                  <label for="name">Full Name</label>
                  <input
                    id="name"
                    class="field"
                    type="text"
                    name="name"
                    required
                    autocomplete="name"
                    placeholder="John Doe"
                    minlength="2"
                  />
                  <span class="sr-only" id="nameHelp">Enter your first and last name.</span>
                </div>

                <div class="form-field">
                  <label for="email">Email Address</label>
                  <input
                    id="email"
                    class="field"
                    type="email"
                    name="email"
                    required
                    autocomplete="email"
                    placeholder="you@example.com"
                  />
                </div>

                <div class="form-field">
                  <label for="phone">Phone Number</label>
                  <input
                    id="phone"
                    class="field"
                    type="tel"
                    name="phone"
                    required
                    autocomplete="tel"
                    placeholder="(555) 555-5555"
                    inputmode="tel"
                    pattern="^[0-9+().\s-]{7,}$"
                  />
                  <p class="muted tiny" style="margin-top:8px;">We only use this to contact you about your request.</p>
                </div>

                <div class="form-field">
                  <label for="preferred">Preferred Contact</label>
                  <select id="preferred" class="field" name="preferredContact" required>
                    <option value="" selected disabled>Choose one</option>
                    <option value="Email">Email</option>
                    <option value="Phone">Phone</option>
                    <option value="Text">Text</option>
                  </select>
                </div>

                <div class="form-field form-span">
                  <label for="category">Service Category</label>
                  <select id="category" class="field" name="category" required>
                    <option value="Hardware">Hardware</option>
                    <option value="Software">Software</option>
                    <option value="Networking">Networking</option>
                    <option value="Security">Security</option>
                    <option value="Programming">Programming</option>
                    <option value="Not sure" selected>Not sure</option>
                  </select>
                </div>

                <div class="form-field">
                  <label for="urgency">Urgency</label>
                  <select id="urgency" class="field" name="urgency" required>
                    <option value="" selected disabled>Select urgency</option>
                    <option value="Low">Low (this week is fine)</option>
                    <option value="Medium">Medium (next 48–72 hours)</option>
                    <option value="High">High (today / ASAP)</option>
                  </select>
                </div>

                <div class="form-field">
                  <label for="bestTime">Best Time to Reach You</label>
                  <select id="bestTime" class="field" name="bestTime" required>
                    <option value="" selected disabled>Select a window</option>
                    <option value="Morning">Morning</option>
                    <option value="Afternoon">Afternoon</option>
                    <option value="Evening">Evening</option>
                    <option value="Anytime">Anytime</option>
                  </select>
                </div>

                <div class="form-field form-span">
                  <label for="device">Device / Environment</label>
                  <input
                    id="device"
                    class="field"
                    type="text"
                    name="device"
                    placeholder="Example: Windows 11 PC, MacBook Pro, home Wi-Fi, pfSense, etc."
                    autocomplete="off"
                  />
                  <p class="muted tiny" style="margin-top:8px;">
                    Optional, but it helps us diagnose faster.
                  </p>
                </div>

                <div class="form-field form-span">
                  <label for="message">Brief Description</label>
                  <textarea
                    id="message"
                    class="field"
                    name="message"
                    rows="7"
                    placeholder="What’s going on? What’s your goal? Any error messages? What changed recently?"
                    required
                    minlength="10"
                  ></textarea>
                </div>

                <div class="form-field form-span">
                  <label class="muted tiny" style="display:block; margin-bottom:10px;">
                    <input type="checkbox" id="noSecrets" name="noSecrets" required>
                    I understand I should not include passwords or sensitive credentials.
                  </label>
                </div>

                <div class="form-field form-span">
                  <button id="submitBtn" type="submit" class="btn primary form-submit">
                    Send Request
                  </button>

                  <p class="form-note">
                    We typically respond within 24 hours. If this is urgent, include “High” urgency and a phone number.
                  </p>

                  <!-- Status messages -->
                  <div id="formStatus" class="alert info" role="status" aria-live="polite" style="display:none;"></div>

                  <noscript>
                    <div class="alert info" role="note" style="margin-top:12px;">
                      JavaScript is disabled, so this will submit as a standard form POST.
                    </div>
                  </noscript>
                </div>
              </div>
            </form>

            <hr style="margin: 18px 0; opacity: 0.15;">
          </article>

          <!-- RIGHT: OTHER CONTACT -->
          <aside class="image-card">
            <h3>Other ways to reach us</h3>

            <ul class="checklist contact-list">
              <li>Email: <span class="muted">Tavares.A.Baker@gmail.com</span></li>
              <li>Phone: <span class="muted">773-580-3037</span></li>
              <li>Service area: <span class="muted">Chicago & Fort Wayne / region</span></li>
              <li>Hours: <span class="muted">9 AM - 5 PM EST</span></li>
            </ul>

            <div class="cta-band cta-slim">
              <div>
                <h2 class="cta-title">Want a fast quote?</h2>
                <p class="cta-text">Include photos/screenshots and a short description of the issue.</p>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-grid">
      <div>
        <div class="footer-brand">Baker Tech Solutions</div>
        <p class="muted">Custom hardware • Secure systems • Automation</p>
      </div>
      <div class="footer-links">
        <a href="services.html">Services</a>
        <a href="pricing.html">Pricing</a>
        <a href="community.html">Community</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
    <div class="container footer-bottom">
      <p>© 2026 Baker Tech Solutions</p>
    </div>
  </footer>

  <script src="scripts.js"></script>

  <!-- ✅ Updated page-only form handler with redirect -->
  <script>
    (function () {
      const form = document.getElementById("contactForm");
      if (!form) return;

      // Change this if you want a different thank-you page
      const REDIRECT_URL = "thanks.html";

      const statusEl = document.getElementById("formStatus");
      const submitBtn = document.getElementById("submitBtn");
      const submittedAt = document.getElementById("submittedAt");

      function showStatus(type, msg) {
        if (!statusEl) return;
        statusEl.className = "alert " + type;
        statusEl.textContent = msg;
        statusEl.style.display = "block";
      }

      function hideStatus() {
        if (!statusEl) return;
        statusEl.style.display = "none";
        statusEl.textContent = "";
        statusEl.className = "alert info";
      }

      function clearInvalid() {
        const fields = form.querySelectorAll(".field");
        fields.forEach((f) => f.setAttribute("aria-invalid", "false"));
      }

      function markInvalid(el) {
        if (!el) return;
        try { el.setAttribute("aria-invalid", "true"); } catch (_) {}
      }

      function getFormData() {
        const fd = new FormData(form);
        const obj = {};
        for (const [k, v] of fd.entries()) {
          if (k === "website") continue;
          obj[k] = typeof v === "string" ? v.trim() : v;
        }
        obj.userAgent = navigator.userAgent;
        obj.referrer = document.referrer || "";
        obj.url = window.location.href;
        return obj;
      }

      function validate() {
        clearInvalid();
        hideStatus();

        // Honeypot
        const honeypot = form.querySelector('input[name="website"]');
        if (honeypot && honeypot.value.trim() !== "") return { ok: false, silent: true };

        const required = ["name","email","phone","preferredContact","category","urgency","bestTime","message"];
        for (const name of required) {
          const el = form.elements[name];
          if (!el) continue;
          if (!el.checkValidity()) {
            markInvalid(el);
            return { ok: false, field: el, message: el.validationMessage || "Please fill out this field." };
          }
        }

        const phoneEl = form.elements.phone;
        const phone = (phoneEl?.value || "").trim();
        if (phone.length < 7) {
          markInvalid(phoneEl);
          return { ok: false, field: phoneEl, message: "Please enter a valid phone number." };
        }

        const noSecrets = form.elements.noSecrets;
        if (noSecrets && !noSecrets.checked) {
          return { ok: false, field: noSecrets, message: "Please confirm you won’t include passwords or sensitive info." };
        }

        return { ok: true };
      }

      async function postJson(endpoint, payload) {
        const res = await fetch(endpoint, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Accept": "application/json"
          },
          body: JSON.stringify(payload)
        });

        const ct = (res.headers.get("content-type") || "").toLowerCase();
        let data = null;
        if (ct.includes("application/json")) data = await res.json().catch(() => null);
        else {
          const text = await res.text().catch(() => "");
          data = text ? { message: text } : null;
        }

        return { res, data };
      }

      function redirectSoon() {
        setTimeout(() => {
          window.location.href = REDIRECT_URL;
        }, 700);
      }

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        if (submittedAt) submittedAt.value = new Date().toISOString();

        const v = validate();
        if (!v.ok) {
          if (v.silent) { redirectSoon(); return; }
          showStatus("error", v.message || "Please fix the highlighted fields.");
          if (v.field && typeof v.field.focus === "function") v.field.focus();
          return;
        }

        const endpoint = form.getAttribute("action") || "";
        if (!endpoint) {
          showStatus("error", "Form endpoint is missing. Set the form action URL.");
          return;
        }

        const oldBtnText = submitBtn ? submitBtn.textContent : "";
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.textContent = "Sending...";
        }

        showStatus("info", "Sending your request…");

        try {
          const payload = getFormData();
          const { res, data } = await postJson(endpoint, payload);

          if (!res.ok) {
            const msg = (data && (data.error || data.message)) || "Something went wrong. Please try again.";
            showStatus("error", msg);
            return;
          }

          showStatus("success", "Request sent! Redirecting…");
          form.reset();
          clearInvalid();
          redirectSoon();

        } catch (err) {
          showStatus("error", "Network error. Please try again, or contact us directly using the email/phone on this page.");
        } finally {
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.textContent = oldBtnText || "Send Request";
          }
        }
      });
    })();
  </script>
</body>
</html>
